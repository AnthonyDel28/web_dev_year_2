{% extends 'admin/base.html.twig' %}

{% block title %}Users{{ parent()}} {% endblock %}

{% block body %}
    <h4 class="my-5 text-muted">Gestion des utilisateurs</h4>
    <table id="table-admin" class="table table-hover">
        <thead>
        <tr>
            <th>Avatar</th>
            <th>Nom & Prénom</th>
            <th>E-Mail</th>
            <th>Rôle</th>
            <th>Création</th>
            <th>Modification</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for user in users %}
            <tr>
                <td><img src="{{ asset('img/avatar/') ~ user.imageName }}"  alt="{{ user.firstName }}"
                         class="admin-img"></td>
                <td>{{ user.lastName }} {{ user.firstName }}</td>
                <td>{{ user.email }}</td>
                {% for role in user.roles %}
                    {% if role is same as 'ROLE_USER' %}
                        <td>Utilisateur</td>
                    {% elseif role is same as 'ROLE_ADMIN' %}
                        <td>Administrateur</td>
                    {% elseif role is same as 'ROLE_SUPER_ADMIN' %}
                        <td>Super Admin</td>
                        {% endif %}
                {% endfor %}
                <td>{{ user.createdAt|date('d/m/Y h:m') }}</td>
                <td>{{ user.updatedAt|date('d/m/Y h:m') }}</td>
                <td>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingFour">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                <a href="">Change le rôle <i class="icofont-key-hole"></i></a>
                            </button>
                        </h2>
                        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample" style="">
                            <div class="accordion-body">
                                {% for role in user.roles %}
                                    {% if role is same as 'ROLE_USER' %}
                                        <a>Utilisateur</a><br>
                                        <a href="{{ path('app_admin_role_user_admin', {'id': user.id}) }}">Administrateur</a><br>
                                        <a href="{{ path('app_admin_role_user_super_admin', {'id': user.id}) }}">Super Admin</a><br>
                                    {% elseif role is same as 'ROLE_ADMIN' %}
                                        <a href="{{ path('app_admin_role_user_user', {'id': user.id}) }}">Utilisateur</a><br>
                                        <a>Administrateur</a><br>
                                        <a href="{{ path('app_admin_role_user_super_admin', {'id': user.id}) }}">Super Admin</a><br>
                                    {% elseif role is same as 'ROLE_SUPER_ADMIN' %}
                                        <a href="{{ path('app_admin_role_user_user', {'id': user.id}) }}">Utilisateur</a><br>
                                        <a href="{{ path('app_admin_role_user_admin', {'id': user.id}) }}">Administrateur</a><br>
                                        <a>Super Admin</a><br>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </td>
                <td>
                    <a href="{{ path('app_admin_user_delete', {'id': user.id}) }}" class="btn btn-danger"><i
                                class="icofont-ui-delete"></i></a>&nbsp;
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}